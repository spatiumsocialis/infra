apiVersion: v1
kind: Service
metadata:
    name: scoring
    labels:
        app: scoring
spec:
    type: ClusterIp
    ports:
        - port: 80
    selector:
        app: scoring
---
apiVersion: apps/v1
kind: Deployment
metadata:
    name: scoring
    labels:
        app: scoring
spec:
    replicas: 3
    selector:
        matchLabels:
            app: scoring
    template:
        metadata:
           labels:
              app: scoring
        spec:
           containers:
               - name: scoring-app
                 image: gcr.io/spatiumsocialis/scoring:latest
                 ports:
                     - containerPort: 8080
                 envFrom:
                     - configMapRef:
                         name: env
               - name: scoring-consumer
                 image: gcr.io/spatiumsocialis/scoring_consumer:latest
                 envFrom:
                     - configMapRef:
                         name: env
---
apiVersion: apps/v1
kind: Deployment
metadata:
    name: daily-points-cron
    labels:
        app: daily-points-cron
spec:
    replicas: 1
    selector:
        matchLabels:
            app: daily-points-cron
    template:
        metadata:
           labels:
              app: daily-points-cron
        spec:
           containers:
               - name: daily-points-cron
                 image: gcr.io/spatiumsocialis/daily_points_cron:latest
                 envFrom:
                     - configMapRef:
                         name: env
   
   
   
